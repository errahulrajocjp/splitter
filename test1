@Test
void testCheck5GCoverageForAddresses_SplitAddressServiceError() {
    // Setup
    FiveGCoverageCheckRequest request = new FiveGCoverageCheckRequest();
    List<CustomerAddress> addresses = new ArrayList<>();
    CustomerAddress address = new CustomerAddress();
    address.setAddressLine1("123 Main St");
    address.setZipCode("10001");
    addresses.add(address);
    request.setCustomerAddress(addresses);

    when(spectrumAdapterService.splitAddress(any()))
            .thenReturn(Mono.error(new RuntimeException("Service unavailable")));

    // Execute - When ALL addresses fail (service error), we get FAILURE_STATUS
    StepVerifier.create(validateBusinessAccountHelper.check5GCoverageForAddresses(request))
            .assertNext(response -> {
                assertNotNull(response);
                assertNotNull(response.getData());
                // When all addresses fail, statusCode is FAILURE_STATUS
                assertEquals(SmbConstants.FAILURE_STATUS, response.getData().getStatusCode());
                // Errors should be populated
                assertNotNull(response.getData().getErrors());
                assertFalse(response.getData().getErrors().isEmpty());
                // Response object is null when error occurs
                assertNull(response.getData().getResponse());
            })
            .verifyComplete();
}
